<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="Simple weight converter">
    <title>Weight Converter</title>

    <!-- <link rel="stylesheet" href="css/app.css"> -->
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">

    <!-- Open Graph-->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bolaji-wc.netlify.com/">
    <meta property="og:title" content="Weight Converter">
    <meta property="og:image" content="img/favicon.png">
    <meta property="og:description" content="Simple weight converter">
    <meta property="og:site_name" content="Weight Converter">
    <!-- Next tags are optional but recommended -->
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter cards-->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@iambolajiayo">
    <meta name="twitter:creator" content="iambolajiayo">
    <meta name="twitter:url" content="https://bolaji-wc.netlify.com/">
    <meta name="twitter:title" content="Weight Converter">
    <meta name="twitter:description" content="Simple weight converter">
    <meta name="twitter:image" content="img/favicon.png">


    <!-- Bootstrap -->
    <script src="https://kit.fontawesome.com/353fcc5e31.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
              <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
              <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->

    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <section class="jogo">

        <div class="container d-flex justfy-content-center">

            <div class="row user-color" style="text-align: center; margin-bottom:80px; margin-top:20px">

                <div class="col-md-12 user-color" style="height:50px;margin-bottom:20px; font-weight: 600; font-size: 30px" id='player'> </div>

            </div>

            <div class="row">
                <div class="col-md-4 col-sm-4 velha" id="0-0" style="border:1px solid #000000;"> </div>
                <div class="col-md-4 col-sm-4 velha" id="0-1" style="border:1px solid #000000;"> </div>
                <div class="col-md-4 col-sm-4 velha" id="0-2" style="border:1px solid #000000;"> </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-sm-4 velha" id="1-0" style="border:1px solid #000000;"> </div>
                <div class="col-md-4 col-sm-4 velha" id="1-1" style="border:1px solid #000000;"> </div>
                <div class="col-md-4 col-sm-4 velha" id="1-2" style="border:1px solid #000000;"> </div>
            </div>

            <div class="row">
                <div class="col-md-4 col-sm-4 velha" id="2-0" style="border:1px solid #000000;"> </div>
                <div class="col-md-4 col-sm-4 velha" id="2-1" style="border:1px solid #000000;"> </div>
                <div class="col-md-4 col-sm-4 velha" id="2-2" style="border:1px solid #000000;"> </div>
            </div>


        </div>

    </section>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>


    <script type="text/javascript">
        let p = [
            ['p1', 'X'],
            ['p2', 'O']
        ];
        let player = Math.floor(Math.random() * 2);
        let aux_player;

        var items = [
            [null, null, null],
            [null, null, null],
            [null, null, null]
        ];


        $(document).ready(function() {

            let p1 = localStorage.getItem('p1');
            let p2 = localStorage.getItem('p2');

            localStorage.setItem('currentPlayer', player);


            if (p1 == null || p2 == null) {

                location.href = 'home.html';

            } else {

                $('#player').html('Jogador da vez <br>' + localStorage.getItem(p[player][0]) + '<br>' + p[player][1]);

            }


        });

        $('.velha').click(function() {

            aux_player = localStorage.getItem('currentPlayer');

            if (aux_player === '0') {

                localStorage.setItem('currentPlayer', 1);

            } else {

                localStorage.setItem('currentPlayer', 0);

            }

            $('#player').html('Jogador da vez <br>' + localStorage.getItem(p[player][0]) + '<br>' + p[player][1]);

            icon = aux_player - 0 ? '<i class="fas fa-circle" style="position: absolute;"></i>' : '<i class="fas fa-times" style="position: absolute;"></i>';

            $(this).html(icon);

            matrizPosicao = this.id.split('-', 2);

            items[matrizPosicao[0]][matrizPosicao[1]] = aux_player;

            let verifica = verificaMatriz(aux_player);

            if (verifica.toString() == 0) {

                $('.jogo').html("<span class='winner'> <div class='col-md-12'> " + localStorage.getItem('p1') + " <br>é o vencedor</span><br><button onclick='location.reload()' >Jogar Novamente</button> </div>");

            }

            if (verifica.toString() == 1) {

                $('.jogo').html("<span class='winner'> <div class='col-md-12'> " + localStorage.getItem('p2') + " <br>é o vencedor</span><br><button onclick='location.reload()' >Jogar Novamente</button> </div>");

            }

        });

        function verificaMatriz(simbolo) {

            if (items[0][0] == simbolo && items[0][1] == simbolo && items[0][2] == simbolo)
                return simbolo;

            if (items[1][0] == simbolo && items[1][1] == simbolo && items[1][2] == simbolo)
                return simbolo;

            if (items[2][0] == simbolo && items[2][1] == simbolo && items[2][2] == simbolo)
                return simbolo;

            if (items[0][0] == simbolo && items[1][1] == simbolo && items[2][2] == simbolo)
                return simbolo;

            if (items[2][0] == simbolo && items[1][1] == simbolo && items[0][2] == simbolo)
                return simbolo;

            if (items[0][0] == simbolo && items[1][0] == simbolo && items[2][0] == simbolo)
                return simbolo;

            if (items[0][1] == simbolo && items[1][1] == simbolo && items[2][1] == simbolo)
                return simbolo;

            if (items[0][2] == simbolo && items[1][2] == simbolo && items[2][2] == simbolo)
                return simbolo;

            return false;

        }
    </script>

</body>

</html>
